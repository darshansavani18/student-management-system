<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}SMS{% endblock %}</title>

    {% load static %}
    <link rel="stylesheet" href="{% static 'school/css/main.css' %}">

    {% block extra_css %}{% endblock %}
</head>
<body>

<div class="layout">

    <!-- SIDEBAR -->
    <div class="sidebar">
        <h2>SMS PANEL</h2>
        <a href="{% url 'dashboard' %}">ğŸ“Š Dashboard</a>
        <a href="{% url 'add_student' %}">â• Add Student</a>
        <a href="{% url 'view_students' %}">ğŸ‘¨â€ğŸ“ View Students</a>
        <a href="{% url 'add_teacher' %}">â• Add Teacher</a>
        <a href="{% url 'view_teachers' %}">ğŸ‘¨â€ğŸ« View Teachers</a>
        <a href="#">ğŸ“… Attendance</a>
        <a href="#">ğŸ“„ Reports</a>
    </div>

    <!-- MAIN -->
    <div class="main">

        <!-- TOP NAVBAR -->
        <div class="topbar">
            <h3>{% block page_title %}Dashboard{% endblock %}</h3>

            <div class="menu">
                <button>ğŸ‘¤ {{ request.user.username }} â–¼</button>
                    <div class="dropdown user-dropdown">

                    <!-- USER INFO -->
                    <div class="dropdown-header">
                        <strong>{{ request.user.username }}</strong>
                        <span class="role">Administrator</span>
                    </div>

                    <div class="dropdown-divider"></div>

                    <!-- ACTIONS -->
                    <a href="#">ğŸ‘¤ My Profile</a>
                    <a href="#">âš™ Account Settings</a>
                    <a href="#">ğŸ” Change Password</a>

                    <div class="dropdown-divider"></div>

                    <!-- SYSTEM -->
                    <a href="#" style="pointer-events:none; color:#6b7280;">
                        ğŸ•’ Last Login: {{ request.user.last_login|date:"d M Y" }}
                    </a>

                    <div class="dropdown-divider"></div>

                    <!-- LOGOUT -->
                    <a href="{% url 'logout' %}" class="logout-link">ğŸšª Logout</a>
                </div>
            </div>
        </div>

        <!-- CONTENT -->
        <div class="content">
            {% block content %}{% endblock %}
        </div>

    </div>
</div>

{% block extra_js %}{% endblock %}
<script>
document.addEventListener("DOMContentLoaded", function () {
    const btn = document.getElementById("userMenuBtn");
    const dropdown = document.getElementById("userDropdown");

    btn.addEventListener("click", function (e) {
        e.stopPropagation();
        dropdown.classList.toggle("show");
    });

    document.addEventListener("click", function () {
        dropdown.classList.remove("show");
    });
});
</script>

</body>
</html>
